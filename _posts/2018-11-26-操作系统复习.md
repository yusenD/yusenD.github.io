---
layout: post
title: 操作系统复习
tags: [操作系统]
---

> 谁此时没有房屋，不必再造 <br>
> 谁此时孤独，将永远孤独                       
> <p align="right">——里尔克</p>

## 问题们

关于系统有关的优点可以考虑：提高CPU/内存/资源的利用率，增加系统吞吐量

### 1.进程和线程的定义？进程和线程的区别？进程程序区别？为什么引入进程/线程？优点？
①定义：
* 进程是程序的一次执行，是系统资源分配的基本单位。
    * 进程特性：独立性、并发性、异步性、动态性
* 线程是进程内一个可调度的实体，是处理机调度的基本单位。
    * 线程特性：只拥有必不可少的资源，具有三种基本状态

②进程线程区别：
* 线程是进程的一个组成部分，一个进程可以有多个线程
* 线程在进程的地址空间活动
* 资源分配给进程，真正在处理机上运行的是线程

③进程程序区别：
* 进程是程序的一次执行，是动态概念；程序是一组有序指令，是静态概念
* 程序永存，进程是暂时的

④引入原因：
* 引入进程：发挥系统并发性，提高资源利用率，解决共享性
* 引入线程：简化进程间的通信，以较小的开销来提高并发程度

⑤优点：
回答特性和引入原因吧

### 2.死锁是什么？死锁的原因？产生死锁的必要条件？处理死锁的方法？

* 死锁是指两个或多个进程抢夺资源而造成造成的一种僵局，如果无外力作用下，进程将永远不能推进
* 死锁定义：两个或两个以上的进程都无线等待用不出现的资源而发生的一种状态
* 原因：竞争资源+进程间推进顺序非法
* 必要条件：互斥+请求和保持+环路等待+不剥夺

方法：避免死锁+预防死锁（只要破坏四个条件之一即可）+检测+解除

### 3.临界区、临界资源、互斥进入临界区的准则？

* 临界区：访问临界资源的那段代码
* 临界资源：在一时间段中，只允许一个进程访问的资源
* 空闲则入，忙则等待，让权等待，有限等待

### 4.进程同步和互斥之间的关系

同步：进程之间有相互制约关系
互斥：进程之间不存在直接联系，资源相互共享

### 5.什么是原语

原语是由一组操作构成的原子操作，具有不可分割性，要么全都做，要么全不做

### 6.信号量PV操作相关，什么时候加入阻塞队列？S大于小于等于0的含义？

* P：S<0时候说明没有资源空闲，调用进程加入阻塞队列
* S：S<=0时候说明有进程处于阻塞状态，从等待队列中取出一个进程，加入就绪队列

### 7.生产者-消费者模型和读者写者模型（注意互斥和同步分析）

①生产者-消费者：
 * 互斥关系：生产者-生产者、消费者-消费者、生产者-消费者对缓冲区的访问互斥
 * 同步：生产者生产并且放入缓存区之后，消费者才可以消费
 代码：
 {% highlight java%}
    MUTEX:1 缓冲区
    EMPTY:1 缓存区空位
    FULL:0 缓存区已经有的
//生产者
P(EMPTY)
P(MUTEX)
//PRODECE
V(MUTEX)
V(FULL)

//消费者
P(FULL)
P(MUTEX)
//CONSUMER
V(MUTEX)
V(EMPTY)

{% endhighlight %}

②读者写者：
* 互斥关系：写者-写者、读者-写者对缓冲区访问矛盾，可以有多个读者同时读
* 同步关系：无

代码：

{% highlight java%}
MUTEX:1
WRITE:1 是否可以写
READ: 1 对读者人数的互斥量
READCOUNT:读的人数

//写者：
P(WRITE)
//WRITE
V(WRITE)

//读者：
P(READ)
IF(READCOUNT==0) P(WRITE)
READCOUNT++
V(READ)
//READBOOK
P(READ)
READCOUNT--
IF(READCOUNT==0) V(WRITE)
V(READ)

//读者带人数限制，假如说为N：
加一个信号量：CANREAD: N 是否能读
P(CANREAD)
P(READ)
IF(READCOUNT==0) P(WRITE)
READCOUNT++
V(READ)
//READ BOOK
P(READ)
READCOUNT--
IF(READCOUNT==0) V(WRITE)
V(READ)
V(CANREAD)
{% endhighlight %}

### 8.周转时间+带权周转时间+各种时间

周转时间=完成时间-到达时间
带权周转时间=周转时间/服务时间
（高响应比优先调度算法）优先权=1+等待时间/要求服务时间

### 9.银行家算法答题几个关键词：Need/Available/Max/Request等等

例如：

> Request2 < Need
> Request2 < Acailable
> 假设对进程p2提出请求Request（1，0，1，0）予以满足,则系统资源剩余量为1，0，1，2，此时资源申请可以满足的进程只有p3和p4，假设先让p3完成，他完成后系统剩余资源为xxxx，
> 此时可以满足的有p1p2p4，假设先让p4先完成，他完成之后系统剩余资源为xxxx 。。。。
> 所以存在一个安全队列，p2的请求可以满足

### 10.什么是内存碎片

在内存分配过程中产生的不能供用户作业使用的主存成为内存碎片

分段产生外碎片，没有内碎片，面向用户
分页产生内碎片，没有外碎片，面向系统

### 11.文件计算（直接索引+一级索引。。。。）

题目给出数据块大小B个字节和地址用A个字节表示，
B/A就是就是一级索引数量，每个索引指向一个新的数据块

最后允许的最大文件长度等于：
（直接索引个数+B/A+(B/A)^2）* 数据块大小

### 12.分页、分段、段页、加快表的地址转换过程，以及分别访问内存次数

画图略，注意几个要点：

* 左上角：页/段表长度 | 段表地址
* 右上角：有效地址 2 | 1C4
* 中间：如果是分页的话，表格是 页号 | 块号；如果是分段，表格是 段号 | 段长 | 基址
* 右下角就是物理地址。

分页：两次访问，①访问页表，找到物理块号拼接成物理地址 ②访问内存获得数据

分段：两次访问，①访问段表②访问内存获得数据

段页：三次， ①访问段表，获取页表地址②访问页表，获取物理地址③从地址取出指令或数据

### 13.扫描磁盘算法：FCFS(先来先服务)、SSTF(最短寻道时间)、SCAN(电梯)、CSCAN(循环扫描)，计算平均寻道长度

* FCFS:不用说了
* SSTF:每次都要算最近的
* SCAN:注意方向不能变，就像是电梯一样，到头了再同头返回来
* CSCAN:循环的，方向一直不变

### 14.多级反馈调度相关

实施相关：
* 设置多个就绪队列
* 各个队列优先级不同
* 各个队列中进程执行时间片的大小也各不相同，优先权越高，执行时间片就越小

性能：能较好的满足各种类型用户的需要
①终端型用户：交互性作业，作业通常十分短小
②短批处理作业用户：
③长批处理作业用户：不必担心作业长期得不到处理